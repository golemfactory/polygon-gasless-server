// Copyright 2018-2023 the oak authors. All rights reserved. MIT license.
/**
 * A collection of APIs to help assist in creating middleware.
 *
 * @module
 */ import { isRouterContext } from "./util.ts";
export function getQuery(ctx, { mergeParams , asMap  } = {}) {
    const result = {};
    if (mergeParams && isRouterContext(ctx)) {
        Object.assign(result, ctx.params);
    }
    for (const [key, value] of ctx.request.url.searchParams){
        result[key] = value;
    }
    return asMap ? new Map(Object.entries(result)) : result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvb2FrQHYxMi42LjAvaGVscGVycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIzIHRoZSBvYWsgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG5cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIEFQSXMgdG8gaGVscCBhc3Npc3QgaW4gY3JlYXRpbmcgbWlkZGxld2FyZS5cbiAqXG4gKiBAbW9kdWxlXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBDb250ZXh0IH0gZnJvbSBcIi4vY29udGV4dC50c1wiO1xuaW1wb3J0IHR5cGUgeyBSb3V0ZXJDb250ZXh0IH0gZnJvbSBcIi4vcm91dGVyLnRzXCI7XG5pbXBvcnQgeyBpc1JvdXRlckNvbnRleHQgfSBmcm9tIFwiLi91dGlsLnRzXCI7XG5cbmludGVyZmFjZSBHZXRRdWVyeU9wdGlvbnNCYXNlIHtcbiAgLyoqIFRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIGEgYE1hcGAgaW5zdGVhZCBvZiBhIHJlY29yZCBvYmplY3QuICovXG4gIGFzTWFwPzogYm9vbGVhbjtcblxuICAvKiogTWVyZ2UgaW4gdGhlIGNvbnRleHQncyBgLnBhcmFtc2AuICBUaGlzIG9ubHkgd29ya3Mgd2hlbiBhIGBSb3V0ZXJDb250ZXh0YFxuICAgKiBpcyBwYXNzZWQuICovXG4gIG1lcmdlUGFyYW1zPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEdldFF1ZXJ5T3B0aW9uc0FzTWFwIGV4dGVuZHMgR2V0UXVlcnlPcHRpb25zQmFzZSB7XG4gIC8qKiBUaGUgcmV0dXJuIHZhbHVlIHNob3VsZCBiZSBhIGBNYXBgIGluc3RlYWQgb2YgYSByZWNvcmQgb2JqZWN0LiAqL1xuICBhc01hcDogdHJ1ZTtcbn1cblxuZXhwb3J0IHR5cGUgR2V0UGFyYW1zT3B0aW9ucyA9IEdldFF1ZXJ5T3B0aW9uc0Jhc2UgfCBHZXRRdWVyeU9wdGlvbnNBc01hcDtcblxuLyoqIEdpdmVuIGEgY29udGV4dCwgcmV0dXJuIHRoZSBgLnJlcXVlc3QudXJsLnNlYXJjaFBhcmFtc2AgYXMgYSBgTWFwYCBvZiBrZXlzXG4gKiBhbmQgdmFsdWVzIG9mIHRoZSBwYXJhbXMuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnkoXG4gIGN0eDogQ29udGV4dCB8IFJvdXRlckNvbnRleHQ8c3RyaW5nPixcbiAgb3B0aW9uczogR2V0UXVlcnlPcHRpb25zQXNNYXAsXG4pOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuLyoqIEdpdmVuIGEgY29udGV4dCwgcmV0dXJuIHRoZSBgLnJlcXVlc3QudXJsLnNlYXJjaFBhcmFtc2AgYXMgYSByZWNvcmQgb2JqZWN0XG4gKiBvZiBrZXlzIGFuZCB2YWx1ZXMgb2YgdGhlIHBhcmFtcy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVyeShcbiAgY3R4OiBDb250ZXh0IHwgUm91dGVyQ29udGV4dDxzdHJpbmc+LFxuICBvcHRpb25zPzogR2V0UXVlcnlPcHRpb25zQmFzZSxcbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnkoXG4gIGN0eDogQ29udGV4dCB8IFJvdXRlckNvbnRleHQ8c3RyaW5nPixcbiAgeyBtZXJnZVBhcmFtcywgYXNNYXAgfTogR2V0UGFyYW1zT3B0aW9ucyA9IHt9LFxuKTogTWFwPHN0cmluZywgc3RyaW5nPiB8IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgaWYgKG1lcmdlUGFyYW1zICYmIGlzUm91dGVyQ29udGV4dChjdHgpKSB7XG4gICAgT2JqZWN0LmFzc2lnbihyZXN1bHQsIGN0eC5wYXJhbXMpO1xuICB9XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGN0eC5yZXF1ZXN0LnVybC5zZWFyY2hQYXJhbXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBhc01hcCA/IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMocmVzdWx0KSkgOiByZXN1bHQ7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEseUVBQXlFO0FBRXpFOzs7O0NBSUMsR0FJRCxTQUFTLGVBQWUsUUFBUSxZQUFZO0FBOEI1QyxPQUFPLFNBQVMsU0FDZCxHQUFvQyxFQUNwQyxFQUFFLFlBQVcsRUFBRSxNQUFLLEVBQW9CLEdBQUcsQ0FBQyxDQUFDO0lBRTdDLE1BQU0sU0FBaUMsQ0FBQztJQUN4QyxJQUFJLGVBQWUsZ0JBQWdCLE1BQU07UUFDdkMsT0FBTyxPQUFPLFFBQVEsSUFBSTtJQUM1QjtJQUNBLEtBQUssTUFBTSxDQUFDLEtBQUssTUFBTSxJQUFJLElBQUksUUFBUSxJQUFJLGFBQWM7UUFDdkQsTUFBTSxDQUFDLElBQUksR0FBRztJQUNoQjtJQUNBLE9BQU8sUUFBUSxJQUFJLElBQUksT0FBTyxRQUFRLFdBQVc7QUFDbkQifQ==